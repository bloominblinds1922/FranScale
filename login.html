<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BB Fran Dev â€” TikTok Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: Arial, sans-serif; background:#0f1115; color:#fff; text-align:center; padding:40px; }
    .btn { display:inline-block; margin-top:30px; padding:14px 26px; border-radius:8px;
           background:#dd2d85; color:#fff; font-weight:bold; font-size:18px; text-decoration:none; }
    .btn:hover { background:#b61e68; }
    .note { margin-top:20px; font-size:14px; opacity:0.8; }
  </style>
</head>
<body>
  <h1>Login with TikTok (Sandbox)</h1>
  <p>Click below to authorize BB Fran Dev with TikTok Sandbox.</p>

  <a id="loginBtn" class="btn" href="#">Connect TikTok</a>

  <div class="note" id="status"></div>

  <script>
    // --- CONFIG ---
    const CLIENT_KEY = "sbawntx0pzflxiv0r3"; // Sandbox client_key
    const REDIRECT_URI = "https://oauth.n8n.cloud/oauth2/callback";
    const STATE = "bbtest123";

    // Default scopes (safe in Sandbox; add video.publish later when approved)
    const SCOPES = [
      "user.info.basic",
      "user.info.profile",
      "video.upload",
      "video.list"
    ];

    // --- BUILD AUTH URL ---
    function buildAuthUrl() {
      const base = "https://www.tiktok.com/v2/auth/authorize/";
      const params = new URLSearchParams({
        client_key: CLIENT_KEY,
        response_type: "code",
        scope: SCOPES.join(" "),
        redirect_uri: REDIRECT_URI,
        state: STATE
      });
      return `${base}?${params.toString()}`;
    }

    // --- INIT ---
    const loginBtn = document.getElementById("loginBtn");
    loginBtn.href = buildAuthUrl();

    const status = document.getElementById("status");
    status.innerHTML = `
      <b>Client Key:</b> ${CLIENT_KEY}<br>
      <b>Redirect URI:</b> ${REDIRECT_URI}<br>
      <b>Scopes:</b> ${SCOPES.join(", ")}<br>
      <b>State:</b> ${STATE}
    `;
  </script>
</body>
</html>
